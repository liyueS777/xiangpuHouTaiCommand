webpackJsonp([3],{429:function(e,t,n){function o(e){n(483)}var i=n(157)(n(464),n(499),o,"data-v-2fdebdca",null);e.exports=i.exports},430:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{}},created:function(){},methods:{},props:["title"]}},431:function(e,t,n){t=e.exports=n(156)(!0),t.push([e.i,".configAddHeader{text-align:left;margin-left:10px;margin-bottom:10px}.block{text-align:left;margin-left:40px;margin-top:10px}","",{version:3,sources:["D:/projectLY/frameWork1.0/src/components/common/configHeader.vue"],names:[],mappings:"AACA,iBACE,gBAAiB,AACjB,iBAAkB,AAClB,kBAAoB,CACrB,AACD,OACE,gBAAiB,AACjB,iBAAkB,AAClB,eAAiB,CAClB",file:"configHeader.vue",sourcesContent:["\n.configAddHeader {\n  text-align: left;\n  margin-left: 10px;\n  margin-bottom: 10px;\n}\n.block {\n  text-align: left;\n  margin-left: 40px;\n  margin-top: 10px;\n}\n"],sourceRoot:""}])},432:function(e,t,n){var o=n(431);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n(416)("6c758020",o,!0)},433:function(e,t,n){function o(e){n(432)}var i=n(157)(n(430),n(434),o,null,null);e.exports=i.exports},434:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"block configAddHeader"},[n("span",{staticClass:"wrapper"},[n("el-button",{attrs:{type:"info"}},[n("i",{staticClass:"el-icon-edit"}),e._v("\n      "+e._s(e.title)+"\n    ")])],1)])},staticRenderFns:[]}},435:function(e,t,n){"use strict";var o=n(11),i=new o.default;t.a=i},463:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(433),i=n.n(o);t.default={components:{configheader:i.a},data:function(){return{checkTitle:!1,hasSubCop:!0,compID:"",IndustryAxis:{value:null,label:""},posId:"",titleMsg:"",pattern:{},patternOption:[{value:"Company",label:"公司"},{value:"Label",label:"标题"}],code:"",subComp:{compName:"",compCode:""},version:"",envMsg:{},envOption:this.envOption,UrlDisabled:!1,VersionDisabled:!1,EnvDisabled:!1,repalcePosId:null,titleHeader:{name:"标题头部",type:!1}}},created:function(){this.init(this.configEditItem)},watch:{configEditItem:{handler:function(e,t){this.init(e)},deep:!0}},methods:{init:function(e){var t=this;t.subComp={compCode:"",compName:""},t.titleMsg="";var n=e;t.compID=n.orgName,n.env.indexOf("PC")>-1?t.IndustryAxis=t.axisSeven.find(function(e){return n.industryId==e.value}):n.env.indexOf("iPad")>-1?t.IndustryAxis=t.axisSeven.find(function(e){return n.industryId==e.value}):t.IndustryAxis=t.axisSevenApp.find(function(e){return n.industryId==e.value}),"Company"==n.confType?(t.posId=n.posId,t.hasSubCop=!1,t.subComp.compName=n.subCompName,t.subComp.compCode=n.subCompCode,t.code=n.subCompName+" / "+n.subCompCode,t.checkTitle=!1):"Label"==n.confType&&(t.hasSubCop=!0,t.repalcePosId=n.posId,t.posId=this.titleHeader.name,t.titleHeader.type=!0,t.titleMsg=n.popName,t.checkTitle=!0),t.pattern=t.patternOption.find(function(e,t,o){return e.value==n.confType}),t.version=n.version,n.env&&(t.envMsg=t.envOption.find(function(e,t,o){return e.value==n.env}))},selectPattern:function(e){"URL"==e.value?(this.UrlDisabled=!1,this.VersionDisabled=!0,this.EnvDisabled=!0):"Company"==e.value?(this.UrlDisabled=!1,this.VersionDisabled=!1,this.EnvDisabled=!1,this.patternTilte="子公司名称"):"Label"==e.value&&(this.UrlDisabled=!0,this.VersionDisabled=!0,this.EnvDisabled=!0,this.patternTilte="标题")},urlFocus:function(){var e=this;e.pattern.value||this.$message({message:"请先选择类型",type:"warning",duration:1e3,onClose:function(){e.code="",e.UrlDisabled=!0}})},versionFocus:function(){var e=this;e.pattern.value||this.$message({message:"请先选择类型",type:"warning",duration:1e3,onClose:function(){e.version="",e.VersionDisabled=!0}})},selectEnv:function(){},EditSuccess:function(){var e=this;e.$Ajax.post(e.Host+"/sevenStarController/updateSevenStar",{orgName:e.compID,id:e.configEditItem.id,industryId:e.IndustryAxis.value,posId:e.titleHeader.type?e.repalcePosId:e.posId,popName:e.titleMsg,subCompName:e.subComp.compName,confType:e.pattern.value,subCompCode:e.subComp.compCode,version:e.version,env:e.envMsg.value}).then(function(t){e.$message({message:t.data.msg,type:0==t.data.code?"warning":"success",duration:1500,showClose:!0,onClose:function(){1==t.data.code&&e.$emit("configEditSuccess",{code:1})}})}).catch(function(e){})},editCancel:function(){this.$emit("configEditSuccess",{code:0})}},props:["configEditItem"]}},464:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=(n(435),n(493)),i=n.n(o);t.default={data:function(){return{version:"",optionVersion:[],envMsg:{},optionsEnvMsg:this.envOption,showclose:!1,compOption:"",pageShow:!1,currentPage:1,pageSize:6,total:null,loading:!0,optionComp:[],sevenStarListItem:[],dialogTableVisible:!1,itemNew:{},itemtitle:"",envArr:this.envOption,itemChild:{}}},mounted:function(){},created:function(){var e=this;e.listOff=!0,e.loading=!1,e.getMsg()},methods:{changeSortVersion:function(e,t){return e.version-t.version>0},changeSort:function(e,t){return e.industryId-t.industryId>0},close1:function(){this.init()},getComp:function(){var e=this;return 1==e.$store.getters.user.grade?(this.compOption=e.$store.getters.user.company.comp_code,e.optionComp[0]={compCode:e.$store.getters.user.company.comp_code,compId:e.$store.getters.user.company.id,compName:e.$store.getters.user.company.comp_name},!1):0==e.$store.getters.user.grade?e.$Ajax.post(e.Host+"/sevenStarController/getAllCompany",{}):void 0},getVersion:function(){var e=this;return e.$Ajax.post(e.Host+"/sevenStarController/getSevenStarVersion",{})},getMsg:function(){var e=this;e.$Ajax.all([e.getComp(),e.getVersion()]).then(e.$Ajax.spread(function(t,n){0==e.$store.getters.user.grade&&(e.optionComp=t.data.data),e.optionVersion=n.data.data}))},init:function(){var e=this,t=this;return t.compOption?t.version?t.envMsg.value?void this.$Ajax.post(this.Host+"/sevenStarController/getSevenStarByOrgName",{orgName:t.compOption,env:t.envMsg.value,version:t.version}).then(function(n){1==n.data.code?e.sevenStarListItem=n.data.data:(e.$message({message:n.data.msg,type:"warning",duration:t.$duration,showClose:!0}),e.sevenStarListItem=[])}).catch(function(e){}):void this.$message({message:"请先选择环境信息",type:"warning",duration:t.$duration,showClose:!0}):void this.$message({message:"请先选择版本信息",type:"warning",duration:t.$duration,showClose:!0}):void this.$message({message:"请先选择集团公司",type:"warning",duration:t.$duration,showClose:!0})},editFinish:function(e){e.code,this.dialogTableVisible=!1},deleConfigItem:function(e,t){var n=this;n.$confirm("确定删除?","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.$Ajax.post(n.Host+"/sevenStarController/delSevenStarById",{id:t}).then(function(e){n.$message({type:1==e.data.code?"success":"error",message:e.data.msg,duration:n.$duration,onClose:function(){n.init()}})}).catch(function(e){})}).catch(function(){n.$message({type:"info",message:"已取消删除",duration:n.$duration})})},editConfigItem:function(e,t){this.dialogTableVisible=!0,this.itemChild=t},selectCompName:function(e){}},components:{configedit:i.a}}},467:function(e,t,n){t=e.exports=n(156)(!0),t.push([e.i,".configAddHeader[data-v-114e6ef2]{text-align:left;margin-left:10px;margin-bottom:10px}.configAdd li[data-v-114e6ef2]{padding:10px}.configAdd li>div[data-v-114e6ef2]{float:left;padding-left:10px;line-height:36px}.configAdd li>div[data-v-114e6ef2]:first-of-type{min-width:100px;text-align:left;padding-left:30px}.configAdd li>div[data-v-114e6ef2]:last-of-type{width:300px}.configAdd li>div:last-of-type>div[data-v-114e6ef2]{width:100%}.block[data-v-114e6ef2]{text-align:left;margin-left:40px;margin-top:10px}","",{version:3,sources:["D:/projectLY/frameWork1.0/src/components/sevenStar/sevenStarEdit.vue"],names:[],mappings:"AACA,kCACE,gBAAiB,AACjB,iBAAkB,AAClB,kBAAoB,CACrB,AACD,+BACE,YAAc,CACf,AACD,mCACI,WAAY,AACZ,kBAAmB,AACnB,gBAAkB,CACrB,AACD,iDACI,gBAAiB,AACjB,gBAAiB,AACjB,iBAAmB,CACtB,AACD,gDACI,WAAa,CAChB,AACD,oDACM,UAAY,CACjB,AACD,wBACE,gBAAiB,AACjB,iBAAkB,AAClB,eAAiB,CAClB",file:"sevenStarEdit.vue",sourcesContent:["\n.configAddHeader[data-v-114e6ef2] {\n  text-align: left;\n  margin-left: 10px;\n  margin-bottom: 10px;\n}\n.configAdd li[data-v-114e6ef2] {\n  padding: 10px;\n}\n.configAdd li > div[data-v-114e6ef2] {\n    float: left;\n    padding-left: 10px;\n    line-height: 36px;\n}\n.configAdd li > div[data-v-114e6ef2]:first-of-type {\n    min-width: 100px;\n    text-align: left;\n    padding-left: 30px;\n}\n.configAdd li > div[data-v-114e6ef2]:last-of-type {\n    width: 300px;\n}\n.configAdd li > div:last-of-type > div[data-v-114e6ef2] {\n      width: 100%;\n}\n.block[data-v-114e6ef2] {\n  text-align: left;\n  margin-left: 40px;\n  margin-top: 10px;\n}\n"],sourceRoot:""}])},471:function(e,t,n){t=e.exports=n(156)(!0),t.push([e.i,".configCheck[data-v-2fdebdca]{display:inline-block;margin-bottom:20px}td .cell span .el-tag[data-v-2fdebdca]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:100%;background-color:#c0c5cc}","",{version:3,sources:["D:/projectLY/frameWork1.0/src/components/sevenStar/sevenStarList.vue"],names:[],mappings:"AACA,8BACE,qBAAsB,AACtB,kBAAoB,CACrB,AACD,uCACE,gBAAiB,AACjB,uBAAwB,AACxB,mBAAoB,AACpB,WAAY,AACZ,wBAA0B,CAC3B",file:"sevenStarList.vue",sourcesContent:["\n.configCheck[data-v-2fdebdca] {\n  display: inline-block;\n  margin-bottom: 20px;\n}\ntd .cell span .el-tag[data-v-2fdebdca] {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  width: 100%;\n  background-color: #c0c5cc;\n}\n"],sourceRoot:""}])},479:function(e,t,n){var o=n(467);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n(416)("5a1c8504",o,!0)},483:function(e,t,n){var o=n(471);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n(416)("5884a573",o,!0)},493:function(e,t,n){function o(e){n(479)}var i=n(157)(n(463),n(495),o,"data-v-114e6ef2",null);e.exports=i.exports},495:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("configheader",{attrs:{title:0==e.hasSubCop?"查看配置":"编辑配置"}}),e._v(" "),n("ul",{staticClass:"configAdd"},[n("li",{staticClass:"clearfix"},[n("div",[e._v("集团编码")]),e._v(" "),n("div",[n("el-input",{attrs:{placeholder:"请输入公司编码",disabled:""},model:{value:e.compID,callback:function(t){e.compID=t},expression:"compID"}})],1)]),e._v(" "),n("li",{staticClass:"clearfix"},[n("div",[e._v("七星位置")]),e._v(" "),n("div",[n("el-input",{attrs:{placeholder:"请选择产业轴",disabled:""},model:{value:e.IndustryAxis.label,callback:function(t){e.IndustryAxis.label=t},expression:"IndustryAxis.label"}})],1)]),e._v(" "),n("li",{staticClass:"clearfix"},[n("div",[e._v("位置顺序")]),e._v(" "),n("div",[n("el-input",{attrs:{placeholder:"请选择位置顺序",disabled:""},model:{value:e.posId,callback:function(t){e.posId=t},expression:"posId"}})],1)]),e._v(" "),n("li",{staticClass:"clearfix"},[n("div",[e._v("类型")]),e._v(" "),n("div",[n("el-select",{attrs:{placeholder:"请选择类型",disabled:""},on:{change:e.selectPattern},model:{value:e.pattern,callback:function(t){e.pattern=t},expression:"pattern"}},e._l(e.patternOption,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e}})}))],1)]),e._v(" "),e.checkTitle?n("li",{staticClass:"clearfix"},[n("div",[e._v("标题")]),e._v(" "),n("div",[n("el-input",{attrs:{placeholder:"请输入名称"},model:{value:e.titleMsg,callback:function(t){e.titleMsg=t},expression:"titleMsg"}})],1)]):e._e(),e._v(" "),e.checkTitle?e._e():n("li",{staticClass:"clearfix"},[n("div",[e._v("子公司信息")]),e._v(" "),n("div",[n("el-input",{attrs:{placeholder:"请输入公司信息",disabled:""},on:{focus:e.urlFocus},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1)]),e._v(" "),n("li",{staticClass:"clearfix"},[n("div",[e._v("版本信息")]),e._v(" "),n("div",[n("el-input",{attrs:{placeholder:"请输入对应版本",disabled:""},on:{focus:e.versionFocus},model:{value:e.version,callback:function(t){e.version=t},expression:"version"}})],1)]),e._v(" "),n("li",{staticClass:"clearfix"},[n("div",[e._v("环境信息")]),e._v(" "),n("div",[n("el-select",{attrs:{placeholder:"请选择环境信息",disabled:""},on:{change:e.selectEnv},model:{value:e.envMsg,callback:function(t){e.envMsg=t},expression:"envMsg"}},e._l(e.envOption,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e}})}))],1)])]),e._v(" "),n("div",{staticClass:"block"},[n("span",{staticClass:"wrapper"},[e.hasSubCop?n("el-button",{attrs:{type:"success"},on:{click:e.EditSuccess}},[e._v("确定")]):e._e(),e._v(" "),n("el-button",{attrs:{type:"info"},on:{click:e.editCancel}},[e._v(e._s(e.subComp.compName?"确定":"取消"))])],1)])],1)},staticRenderFns:[]}},499:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading.body",value:e.loading,expression:"loading",modifiers:{body:!0}}],staticClass:"company"},[n("el-select",{staticClass:"configSelect1",attrs:{placeholder:"请选择集团"},model:{value:e.compOption,callback:function(t){e.compOption=t},expression:"compOption"}},e._l(e.optionComp,function(e){return n("el-option",{key:e.compId,attrs:{label:e.compName,value:e.compCode}})})),e._v(" "),n("el-select",{attrs:{placeholder:"请选择版本"},model:{value:e.version,callback:function(t){e.version=t},expression:"version"}},e._l(e.optionVersion,function(e,t){return n("el-option",{key:e.index,attrs:{label:e.index,value:e}})})),e._v(" "),n("el-select",{attrs:{placeholder:"请选择环境"},model:{value:e.envMsg,callback:function(t){e.envMsg=t},expression:"envMsg"}},e._l(e.optionsEnvMsg,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e}})})),e._v(" "),n("div",{staticClass:"block configCheck"},[n("span",{staticClass:"wrapper"},[n("el-button",{attrs:{type:"info"},on:{click:e.init}},[e._v("查询")])],1)]),e._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.sevenStarListItem,border:"","max-height":"530","default-sort":{prop:"position",order:"descending"},"empty-text":" "}},[n("el-table-column",{attrs:{label:"集团编码",width:"150",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.orgName))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"七星位置",sortable:"","sort-method":e.changeSort,prop:"position",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e._f("convertSevenAxis")(t.row.industryId,t.row.env)))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"位置顺序",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s("Company"==t.row.confType?t.row.posId:"标题头部"))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"名称",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s("Company"==t.row.confType?t.row.subCompName:t.row.popName))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"类型",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tag",[e._v(e._s(e._f("convertPattern")(t.row.confType)))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"子公司编码",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.subCompCode?t.row.subCompCode:"暂无"))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"版本",sortable:"","sort-method":e.changeSortVersion,prop:"version",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.version?t.row.version:"Default"))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"环境",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tag",[e._v(e._s(e._f("convertEnv")(t.row.env)))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",fixed:"right","min-width":"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(n){e.editConfigItem(t.$index,t.row)}}},[e._v(e._s(t.row.subCompCode?"查看":"编辑"))]),e._v(" "),n("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(n){e.deleConfigItem(t.$index,t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),n("el-dialog",{attrs:{title:"",visible:e.dialogTableVisible,"lock-scroll":e.showclose},on:{"update:visible":function(t){e.dialogTableVisible=t},close:e.close1}},[n("configedit",{attrs:{configEditItem:e.itemChild},on:{configEditSuccess:e.editFinish}})],1)],1)},staticRenderFns:[]}}});